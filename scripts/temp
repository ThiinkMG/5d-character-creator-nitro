#!/usr/bin/env python3
# -*- coding: utf-8 -*-
import codecs
import sys

file_path = '5d-character-creator-app/app/src/app/chat/page.tsx'

try:
    # Read file
    with codecs.open(file_path, 'r', 'utf-8') as f:
        content = f.read()
    
    # Fix corrupted em dashes and emojis
    replacements = {
        'Ã¢â‚¬"': 'â€”',  # Em dash
        'Ã°Å¸"â€¹': 'ğŸ“‹',  # Clipboard emoji
        'Ã°Å¸"': 'ğŸ“',  # Memo emoji  
        'Ã°Å¸"': 'ğŸ”',  # Magnifying glass emoji
        'ğŸŒ': 'ğŸŒ',  # Keep globe emoji (might have extra char)
    }
    
    for old, new in replacements.items():
        if old in content:
            content = content.replace(old, new)
            print(f'Replaced: {old} -> {new}')
    
    # Fix the globe emoji that might have extra character
    content = content.replace('ğŸŒ', 'ğŸŒ')
    
    # Write back
    with codecs.open(file_path, 'w', 'utf-8') as f:
        f.write(content)
    
    print('Fixed emoji encoding')
except Exception as e:
    print(f'Error: {e}')
    sys.exit(1)
